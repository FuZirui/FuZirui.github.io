---
title: 设计模式
date: 2025-08-24 12:30:00
updated: 2025-08-24 12:30:00
categories:
- 读书笔记
tags:
- 架构设计
description: 
author: fuzirui
---
# 重构技巧

静态绑定->动态绑定

早绑定->晚绑定

继承->组合

编译时依赖->运行时依赖

紧耦合->松耦合

类的设计：

组合优于继承。

8大原则

更改封闭拓展开放：通过子类继承父类,重写父类虚函数。

复用：编译后的二进制复用，非代码的复用.重构获得模式，寻找变化点，隔离稳定与变化。

了解设计模式的框架，知道什么场景使用什么设计模式。

组件协作

1、模板模式：

驱动器状态机存在稳定的整体结构、子步骤存在多变的需求.父类实现框架、调用虚函数，推荐声明为protected注：父类的西沟为虚函数

2、策略模式：

速度模式位置模式切换使用的算法经常变化，可能新增传统做法：switch case，违背开闭原则。拓展方式解决：提取基类算法纯虚，派生具体子类算法.使用基类指针，可以结合工厂模式，创建返回具体的子类算法，可互相替换.消除条件判断解耦.绝对稳定不变的可以用枚举坏味道

3、观察者模式（事件模式）

目标对象变化，观察者对象自动得到通知并响应；

观察者依赖抽象，抽象通知；

逻辑不要耦合业务界面，松耦合；

vector或者list支持多个观察者；

可增删单一职责类装饰模式组合（has a）优于继承（is a）继承+组合：完善接口规范，支持shi?x解决主体类在多个方向上的拓展多继承：继承多个接口.抽象基类：具体转抽象静态转动态、继?转组合框架与应用、晚绑定：lib调用app（面向对象），延迟到子类（父类定义虚函数，子类重写）实现松耦合早绑定：app调用lib职责链避免发送者和接收者之间的耦合.行为变化类命令模式与函数对象类似.行为封装为对象.请求与实现解耦.
